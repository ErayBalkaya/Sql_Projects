# Steve's Car Showroom
### By Eray Balkaya
![The salesman st 3c570b58-db20-4df6-a73d-b96c6c37c117](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/dea29b36-be84-4f58-abaf-39f90d4d7b96)

Our project focuses on developing a comprehensive database system for managing car sales and salespersons' information. By leveraging the power of SQL databases, we aim to create a robust solution that streamlines the
process of tracking car sales, analyzing sales performance, and managing salespersons' data effectively. The database comprises tables for cars, salespersons, and sales transactions, allowing for the storage of 
crucial information such as car details, salesperson profiles, and sales records. Through this project, we seek to enhance the efficiency and accuracy of car sales management, enabling businesses to make informed 
decisions, optimize sales strategies, and ultimately improve customer satisfaction. Our goal is to provide a user-friendly and scalable database solution that meets the diverse needs of automotive businesses in today's
competitive market.

## Entity Relationship Diagram:
![stevescarshowroom](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/eb0894a4-dac9-4cc4-abd8-3c0617f23e75)

## Descriptions of Tables:

### cars: 
Contains information about different cars, including their make, type, style, and cost.
### salespersons: 
Stores details about salespersons, such as their name, age, and city.
### sales: 
Records sales transactions, linking each sale to a specific car and salesperson, along with the purchase date.

## Case Study Questions:
1) What are the details of all cars purchased in the year 2022?
2) What is the total number of cars sold by each salesperson?
3) What is the total revenue generated by each salesperson?
4) What are the details of the cars sold by each salesperson?
5) What is the total revenue generated by each car type?
6) What are the details of the cars sold in the year 2021 by salesperson 'Emily Wong'?
7) What is the total revenue generated by the sales of hatchback cars?
8) What is the total revenue generated by the sales of SUV cars in the year 2022?
9) What is the name and city of the salesperson who sold the most number of cars in the year 2023?
10) What is the name and age of the salesperson who generated the highest revenue in the year 2022?
11) Who generated the highest revenues every year?
12) What are the amounts of the cars sold?
13) Show the amount and the revenue of each sales person
14) What are the percentage rates of salespersons?
15) How many sales were made in each city?

#### Let's check my answers ðŸŽ†ðŸŽ†

#### 1) What are the details of all cars purchased in the year 2022?

```sql

SELECT DISTINCT(C.CAR_ID),
	CONCAT (MAKE,' ',TYPE),STYLE,COST
FROM CARS C
LEFT JOIN SALES S ON C.CAR_ID = S.CAR_ID
WHERE TO_CHAR(PURCHASE_DATE,'YYYY') = '2022'

```
![1](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/cd8cd90b-4f38-4ead-ba9f-5e7930a17a02)

#### 2) What is the total number of cars sold by each salesperson?

```sql

SELECT SP.NAME,	S.SALESMAN_ID,COUNT(S.*) TOTAL_SALES
FROM SALES S
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
GROUP BY 1,2
ORDER BY 3 DESC

```
![2](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/43abfb88-8405-436f-8649-d53a627b7c0e)

#### 3) What is the total revenue generated by each salesperson?

```sql

SELECT SP.NAME,
	S.SALESMAN_ID,
	SUM(C.COST) TOTAL_REVENUE
FROM SALES S
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
LEFT JOIN CARS C ON C.CAR_ID = S.CAR_ID
GROUP BY 1,2
ORDER BY 3 DESC

```
![3](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/8d930bb7-7f51-4804-8045-a74fac075066)

#### 4) What are the details of the cars sold by each salesperson?

```sql

SELECT DISTINCT S.SALESMAN_ID,
	SP.NAME,
	C.CAR_ID,
	C.MAKE,
	C.TYPE,
	C.STYLE,
	C.COST
FROM SALES S
JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
JOIN CARS C ON C.CAR_ID = S.CAR_ID
ORDER BY SALESMAN_ID,CAR_ID

```
![4](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/1d3237e9-4b23-41e0-9be1-eca04b141592)

#### 5) What is the total revenue generated by each car type?

```sql

SELECT C.CAR_ID,
	C.MAKE,
	C.TYPE,
	C.STYLE,
	SUM(C.COST) TOTAL_REVENUE
FROM CARS C
JOIN SALES S ON C.CAR_ID = S.CAR_ID
GROUP BY C.CAR_ID
ORDER BY 5 DESC

```
![5](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/9b4eaa23-6807-4c83-9720-574e0a44f35c)

#### 6) What are the details of the cars sold in the year 2021 by salesperson 'Emily Wong'?

```sql

SELECT C.CAR_ID,
	CONCAT (MAKE,' ',TYPE),STYLE,COST
FROM CARS C
LEFT JOIN SALES S ON C.CAR_ID = S.CAR_ID
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
WHERE TO_CHAR(PURCHASE_DATE,'YYYY') = '2021'
	AND NAME = 'Emily Wong'

```
![6](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/82ab6ad3-1077-478d-b413-8e0d5676c43f)

#### 7) What is the total revenue generated by the sales of hatchback cars?

```sql

SELECT C.CAR_ID,
		C.MAKE,
		C.TYPE,
		C.STYLE,
		SUM(C.COST) TOTAL_REVENUE
FROM CARS C
JOIN SALES S ON C.CAR_ID = S.CAR_ID 
WHERE STYLE = 'Hatchback'
GROUP BY 1,3

```
![7](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/34ef3b30-040d-408a-842c-3c9bd63b6f4b)

#### 8) What is the total revenue generated by the sales of SUV cars in the year 2022?

```sql

SELECT C.STYLE,
	SUM(C.COST) TOTAL_REVENUE
FROM CARS C
JOIN SALES S ON C.CAR_ID = S.CAR_ID
WHERE TO_CHAR(S.PURCHASE_DATE,'YYYY') = '2022'
	AND STYLE = 'SUV'
GROUP BY 1

```
![8](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/429c2d61-67d0-41e1-a1b5-d014bb077a0b)

#### 9) What is the name and city of the salesperson who sold the most number of cars in the year 2023?

```sql

SELECT S.SALESMAN_ID,
	SP.NAME,
	SP.CITY
FROM SALES S
JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
WHERE TO_CHAR(PURCHASE_DATE,'YYYY') = '2023'
GROUP BY 1,2,3
ORDER BY COUNT(S.SALESMAN_ID) DESC
LIMIT 1

```
![9](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/ae9014fa-1e0a-427e-91bc-661484a971d5)

#### 10) What is the name and age of the salesperson who generated the highest revenue in the year 2022?

```sql

SELECT SP.NAME,
	SP.AGE
FROM SALES S
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
LEFT JOIN CARS C ON C.CAR_ID = S.CAR_ID
WHERE TO_CHAR(PURCHASE_DATE,'YYYY') = '2022'
GROUP BY 1,2
ORDER BY SUM(C.COST) DESC
LIMIT 1

```
![10](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/e7da466c-689a-4c39-bd3a-5573f366e1a9)

#### 11) Who generated the highest revenues every year?

```sql

WITH DATAB AS
	(SELECT SP.NAME,
			SUM(C.COST) TOTAL_REVENUE,
			EXTRACT(YEAR FROM S.PURCHASE_DATE) YEAR_,
			DENSE_RANK() OVER (PARTITION BY EXTRACT(YEAR FROM S.PURCHASE_DATE)	
                         ORDER BY SUM(C.COST) DESC) SALES_RANK
	FROM SALES S
	LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
	LEFT JOIN CARS C ON C.CAR_ID = S.CAR_ID
	GROUP BY 1,3
	ORDER BY YEAR_)
SELECT *
FROM DATAB
WHERE SALES_RANK = 1

```
![11](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/16381bc3-d6dd-4996-a4c2-94d09a904bbe)

#### 12) What are the amounts of the cars sold?

```sql

SELECT DISTINCT(C.CAR_ID),
		CONCAT (MAKE,' ',TYPE) MARKA,
		STYLE,
		COUNT(S.CAR_ID) TOTAL_AMOUNT
FROM CARS C
LEFT JOIN SALES S ON C.CAR_ID = S.CAR_ID
GROUP BY C.CAR_ID
ORDER BY 4 DESC

```
![12](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/fb5a0ae8-82da-4e2a-acd6-05558e35b7a8)

#### 13) Show the amount and the revenue of each sales person.

```sql

SELECT SP.NAME,
	COUNT(S.SALESMAN_ID) SELL_AMOUNT,
	SUM(C.COST)TOTAL_REVENUE
FROM SALES S
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
LEFT JOIN CARS C ON C.CAR_ID = S.CAR_ID
GROUP BY 1
ORDER BY 2 DESC 

```
![13](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/abdcae92-19f2-4ddf-8cee-f52a11c15284)

#### 14) What are the percentage rates of salespersons?

```sql

SELECT SP.NAME,
	COUNT(S.SALESMAN_ID) SELL_AMOUNT,
	SUM(C.COST)TOTAL_REVENUE,
	ROUND((COUNT(S.SALESMAN_ID) / SUM(COUNT(S.SALESMAN_ID)) OVER ()),2) * 100 AS PERCENTAGE_OF_AMOUNT,
	ROUND((SUM(C.COST) / SUM(SUM(C.COST)) OVER ()),2) * 100 AS PERCENTAGE_OF_REVENUE
FROM SALES S
LEFT JOIN SALESPERSONS SP ON S.SALESMAN_ID = SP.SALESMAN_ID
LEFT JOIN CARS C ON C.CAR_ID = S.CAR_ID
GROUP BY 1
ORDER BY 2 DESC 

```
![14](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/80048926-8157-48cf-8267-35ee2fbdeb3a)

#### 15) How many sales were made in each city?

```sql

SELECT SALESPERSONS.CITY,
	COUNT(*) AS TOTAL_SALES
FROM SALESPERSONS
JOIN SALES ON SALESPERSONS.SALESMAN_ID = SALES.SALESMAN_ID
GROUP BY SALESPERSONS.CITY;

```
![15](https://github.com/ErayBalkaya/Sql_Projects/assets/159141102/815aa793-9e09-463f-ae1e-b7a6554ca511)
